<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Document</title>
</head>

<body>


    <div class="container pt-4">
        <h1 text-center>User Details</h1>

        <div class="row pt-4">

            <div class="col detail">
                <div class="card mx-1" style="width:400px">
                    <img class="card-img-top" src="https://www.w3schools.com/w3images/avatar2.png"
                        style="width: 200px; margin-right:auto;margin-left:auto; height: 300px; " alt="Card image">
                    <div class="card-body">
                        <span id="ids"></span>
                        <h4 class="card-title" id="name">Name:</h4>
                        <p class="card-text" id="gmail">Gmail:</p>
                        <a href="fetchdata.html?" class="btn btn-primary">back</a>
                    </div>
                </div>
                <hr>           
            </div>

            <div class="col">
                

            </div>

        </div>

        <h1>gallary</h1>
        <div class="row ">
            <div id="galary"  class="pt-3  d-inline-flex flex-wrap">
                
        
                </div>
            </div>



        <script>
            var d = window.location.href;
            var url = new URL(d);
            var i = url.searchParams.get("a");
            console.log(i);



            fetch('https://jsonplaceholder.typicode.com/users')
                .then(response => response.json())
                .then
                (
                    json => {
                        i = i - 1;

                        const name = json[i].name;
                        const ids = json[i].id;
                        const gmail = json[i].email;
                        // console.log(name);
                        document.getElementById("name").innerHTML = "Name:" + name;
                        document.getElementById("ids").innerHTML = "Id:" + ids;
                        document.getElementById("gmail").innerHTML = "Gmail:" + gmail


                    }
                )
            var gdata;
            var pic = document.getElementById("galary");
            console.log(d)
            fetch(`https://jsonplaceholder.typicode.com/user/${i}/albums`)
                .then(response => response.json())
                .then
                (
                    json => {
                        gdata = json;
                        // console.log(i)

                        console.log(gdata)

                        for (i = 0; i < gdata.length; i++)
                         {

                            let idp = gdata[i].id;

                            let titl = gdata[i].title;


                            pic.innerHTML +=
                                `
         <div class="pt-3 card mx-1" style="width:400px">
            <img class="card-img-top" src="https://cdn.dribbble.com/users/1612143/screenshots/10585194/media/f898b8a3f282c106ea93689a01e258df.jpg?compress=1&resize=400x300" style="width: 200px; margin-right:auto;margin-left:auto; height: 300px; " alt="Card image">
            <div class="card-body">
            <span id="ids"></span>
            <h4 class="card-title" id="name">ID:${idp}</h4>
            <p class="card-text" id="gmail">Title:${titl}</p>
            <a href="viewalbum.html?ai=${idp}" class="btn btn-primary">View album</a>
            <a  onclick="rem(${idp})" class="btn btn-danger">del</a>
            </div>
    `


                        }


                    }
                )


                function rem(id) 
    {
      // c=1;
   

      pic.innerHTML="";

      gdata = gdata.filter(x => {
        return x.id !== id;
        
        
      }
      
      )
      
      
      for (let x in gdata) {
                  console.log(x);
                  
                  let idp = gdata[x].id;

                            let titl = gdata[x].title;


                            pic.innerHTML +=
                                `
         <div class="pt-3 card mx-1" style="width:400px">
            <img class="card-img-top" src="https://cdn.dribbble.com/users/1612143/screenshots/10585194/media/f898b8a3f282c106ea93689a01e258df.jpg?compress=1&resize=400x300" style="width: 200px; margin-right:auto;margin-left:auto; height: 300px; " alt="Card image">
            <div class="card-body">
            <span id="ids"></span>
            <h4 class="card-title" id="name">ID:${idp}</h4>
            <p class="card-text" id="gmail">Title:${titl}</p>
            <a href="viewalbum.html?ai=${idp}" class="btn btn-primary">View album</a>
            <a  onclick="rem(${idp})" class="btn btn-danger">del</a>
            </div>
    `

                }

      // delete gdata[1];
      // console.log(gdata);

    }
        </script>
</body>

</html>